// https://github.com/dynamick/multiple-filter-masonry
!function(a){"use strict";a.fn.multipleFilterMasonry=function(b){var c=[],d=[];"list"===b.selectorType&&a(b.filtersGroupSelector).children().each(function(){d.push(a(this).data("filter"))});var e=function(d){d.find(b.itemSelector).each(function(){c.push(a(this))}),d.masonry(b)},f=function(b){var d=[];return a(c).each(function(e){a(b).each(function(b,f){c[e].is(f)&&-1===a.inArray(c[e],d)&&d.push(c[e])})}),d},g=function(b,c){b.empty(),a(c).each(function(){a(b).append(a(this))}),b.masonry("reloadItems"),b.masonry()},h=function(b){var c=window.location.hash.replace("#","");-1!==a.inArray(c,d)&&g(b,a("."+c))},i=function(d){a(b.filtersGroupSelector).find("input[type=checkbox]").each(function(){a(this).change(function(){var e=[];a(b.filtersGroupSelector).find("input[type=checkbox]").each(function(){a(this).is(":checked")&&e.push("."+a(this).val())});var h=c;e.length>0&&(h=f(e)),g(d,h)})})},j=function(d){a(b.filtersGroupSelector).children().each(function(){a(this).click(function(){a(b.filtersGroupSelector).children().removeClass("selected"),window.location.hash=a(this).data("filter");var e=[];e.push("."+a(this).data("filter")),a(this).addClass("selected");var h=c;e.length>0&&(h=f(e)),g(d,h)})}),h(d),a(b.filtersGroupSelector).children().removeClass("selected"),a(".filters li[data-filter="+window.location.hash.replace("#","")+"]").addClass("selected")};return this.each(function(){var c=a(this);e(c),"list"===b.selectorType?j(c):i(c)})}}(window.jQuery);