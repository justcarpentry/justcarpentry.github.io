$(document).ready(function(){var a=Modernizr.mq("(min-width: 768px)");$("#nav").fixTo(".frame"),$('a[rel="external"]').attr("target","_blank"),smoothScroll.init(),gumshoe.init(),$(".portfolio-items").multipleFilterMasonry({itemSelector:".tile",filtersGroupSelector:".filters"}).on("layoutComplete",function(){gumshoe.setDistances()}),$(".filters input:checkbox").change(function(){$cb=$(this),$cb.is(":checked")?$cb.parent("label").addClass("active"):$cb.parent("label").removeClass("active")}),$(".portfolio-items").magnificPopup({delegate:"a",type:"image",gallery:{enabled:!0},mainClass:"mfp-with-zoom",zoom:{enabled:!0,duration:300,easing:"ease-in-out",opener:function(a){return a.is("img")?a:a.find("img")}}}),jQuery.validator.addMethod("phoneUK",function(a,b){return this.optional(b)||a.length>9&&a.match(/^(((\+44)? ?(\(0\))? ?)|(0))( ?[0-9]{3,4}){3}$/)},"Please specify a valid Contact number"),$("#contactForm").validate({rules:{email:{require_from_group:[1,".contact-group"]},number:{require_from_group:[1,".contact-group"]}},messages:{email:{require_from_group:"Please provide a means of Contact"},number:{require_from_group:"Please provide a means of Contact"}},submitHandler:function(a){var b=$(a),c=b.find("input,textarea,button"),d=b.serializeArray(),e=!1,f=-1;$.each(d,function(a,b){return"fax"==b.name?(""!==b.value&&(e=!0),f=a,!1):void 0}),f>-1&&d.splice(f,1),c.prop("disabled",!0),d.push({name:"_subject",value:"New justcarpentry.net Contact Form Enquiry"}),d.push({name:"_format",value:"plain"}),e&&d.push({name:"_gotcha",value:"012345"});var g=$.ajax({url:"https://formspree.io/info@justcarpentry.net",type:"post",data:d,dataType:"json"});g.done(function(a){"undefined"!==typeof a.success&&"email sent"==a.success&&(b.fadeOut().before('<div class="form-success" style="display: none;"><p>Thanks for your message, I will get back to you soon.</p></div>'),setTimeout(function(){$(".form-success").fadeIn(),gumshoe.setDistances()},600))}),g.fail(function(){alert("Error submitting form, please try again.")}),g.always(function(){c.prop("disabled",!1)})}}),$(window).resize(function(){a&&!Modernizr.mq("(min-width: 768px)")?(a=!1,gumshoe.setDistances()):!a&&Modernizr.mq("(min-width: 768px)")&&(a=!0,gumshoe.setDistances())})});
